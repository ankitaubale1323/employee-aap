
# apiVersion: v1
# kind: ConfigMap
# metadata:
#   name: mysql-initdb
#   namespace: emp-app
# data:
#   init.sql: |
#     CREATE DATABASE IF NOT EXISTS employee_db;
#     CREATE USER IF NOT EXISTS 'employee_user'@'%' IDENTIFIED BY 'root';
#     GRANT ALL PRIVILEGES ON employee_db.* TO 'employee_user'@'%';
#     FLUSH PRIVILEGES;
#     USE employee_db;
#     CREATE TABLE IF NOT EXISTS employees (
#         id INT AUTO_INCREMENT PRIMARY KEY,
#         name VARCHAR(100) NOT NULL,
#         role VARCHAR(100) NOT NULL,
#         created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
#     );
apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-initdb
  namespace: emp-app
data:
  # Key in the ConfigMap
  init.sql: |
    CREATE DATABASE IF NOT EXISTS employee_db;
    CREATE USER IF NOT EXISTS 'employee_user'@'%' IDENTIFIED BY 'root';
    GRANT ALL PRIVILEGES ON employee_db.* TO 'employee_user'@'%';
    FLUSH PRIVILEGES;
    USE employee_db;
    CREATE TABLE IF NOT EXISTS employees (
        id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(100) NOT NULL,
        role VARCHAR(100) NOT NULL,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    );
# Explanation of each SQL line (cannot be inside YAML block):
# CREATE DATABASE...      => Creates database if not exists
# CREATE USER...          => Creates user if not exists
# GRANT ALL PRIVILEGES... => Gives full access to DB
# FLUSH PRIVILEGES        => Reloads MySQL privileges
# USE employee_db         => Switch to database
# CREATE TABLE...         => Creates employees table with columns id, name, role, created_at
